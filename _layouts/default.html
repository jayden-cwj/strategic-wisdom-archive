<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title_en | default: page.title | default: site.title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <h1><a href="{{ '/' | relative_url }}">
                    <span class="lang-en-only">Strategic Wisdom Archive</span>
                    <span class="lang-ko-only">전략적 지혜 아카이브</span>
                </a></h1>
                <button id="langToggle" class="lang-toggle" aria-label="Language Toggle">
                    <span class="lang-option active" data-lang="en">EN</span>
                    <span class="lang-separator">|</span>
                    <span class="lang-option" data-lang="ko">KO</span>
                </button>
            </div>
            <nav>
                <a href="{{ '/' | relative_url }}">
                    <span class="lang-en-only">Home</span>
                    <span class="lang-ko-only">홈</span>
                </a>
                <a href="{{ '/military-history/' | relative_url }}">
                    <span class="lang-en-only">Military History</span>
                    <span class="lang-ko-only">군사 역사</span>
                </a>
                <a href="{{ '/fortifications/' | relative_url }}">
                    <span class="lang-en-only">Defense Structures</span>
                    <span class="lang-ko-only">방어 구조</span>
                </a>
                <a href="{{ '/strategies/' | relative_url }}">
                    <span class="lang-en-only">Strategies</span>
                    <span class="lang-ko-only">전략</span>
                </a>
                <a href="{{ '/simulator/' | relative_url }}">
                    <span class="lang-en-only">Simulator</span>
                    <span class="lang-ko-only">시뮬레이터</span>
                </a>
                <a href="{{ '/map/' | relative_url }}">
                    <span class="lang-en-only">Map</span>
                    <span class="lang-ko-only">지도</span>
                </a>
                <a href="{{ '/insights/' | relative_url }}">
                    <span class="lang-en-only">Insights</span>
                    <span class="lang-ko-only">인사이트</span>
                </a>
            </nav>
        </div>
    </header>

    <main class="content">
        {{ content }}
    </main>

    <footer class="site-footer">
        <div class="container">
            <p class="lang-en-only">&copy; 2025 Strategic Wisdom Archive | Exploring the Logic of Defense, Protection, and Peace</p>
            <p class="lang-ko-only">&copy; 2025 전략적 지혜 아카이브 | 방어, 보호, 평화의 논리 탐구</p>
        </div>
    </footer>

    <script>
        // Language Toggle Functionality
        (function() {
            // Set initial language from localStorage or default to 'en'
            const savedLang = localStorage.getItem('language') || 'en';
            document.body.setAttribute('data-lang', savedLang);

            document.addEventListener('DOMContentLoaded', function() {
                const langToggle = document.getElementById('langToggle');
                if (!langToggle) return; // Exit if button doesn't exist

                const langOptions = document.querySelectorAll('.lang-option');

                // Update button state based on current language
                function updateButtonState(lang) {
                    langOptions.forEach(option => {
                        if (option.dataset.lang === lang) {
                            option.classList.add('active');
                        } else {
                            option.classList.remove('active');
                        }
                    });
                }

                // Set initial button state
                updateButtonState(savedLang);

                // Toggle language on click
                langToggle.addEventListener('click', function() {
                    const currentLang = document.body.getAttribute('data-lang') || 'en';
                    const newLang = currentLang === 'en' ? 'ko' : 'en';

                    document.body.setAttribute('data-lang', newLang);
                    localStorage.setItem('language', newLang);
                    updateButtonState(newLang);
                });
            });
        })();
    </script>
</body>
</html>
